specVersion: 1.3.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: ServerAirdropRegistry
    network: sepolia
    source:
      address: "0x387D6D818F0cafF8a98E9EFecB75694246cF8D92"
      abi: ServerAirdropRegistry
      startBlock: 9552434
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Factory
      abis:
        - name: ServerAirdropRegistry
          file: ./abis/ServerAirdropRegistry.json
        - name: AirdropFactory
          file: ./abis/AirdropFactory.json
        - name: MerkleAirdrop
          file: ./abis/MerkleAirdrop.json
      eventHandlers:
        - event: FactoryCreated(indexed address,indexed string,indexed address,address,uint256,uint256,address,address)
          handler: handleFactoryCreated
      file: ./src/registry.ts

templates:
  - kind: ethereum
    name: AirdropFactory
    network: sepolia
    source:
      abi: AirdropFactory
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Campaign
      abis:
        - name: AirdropFactory
          file: ./abis/AirdropFactory.json
        - name: MerkleAirdrop
          file: ./abis/MerkleAirdrop.json
      eventHandlers:
        - event: AirdropCampaignCreated(indexed address,indexed address,indexed string,address,address,bytes32,string,uint256,uint256,uint256)
          handler: handleAirdropCampaignCreated
      file: ./src/factory.ts

  - kind: ethereum
    name: MerkleAirdrop
    network: sepolia
    source:
      abi: MerkleAirdrop
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Claim
      abis:
        - name: MerkleAirdrop
          file: ./abis/MerkleAirdrop.json
      eventHandlers:
        - event: Claimed(indexed uint256,indexed address,uint256)
          handler: handleClaimed
      file: ./src/campaign.ts
